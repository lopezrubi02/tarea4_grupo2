<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/adminRestaurante.html :: header( title = 'Reporte')"></head>

<!-- body -->
<body class="main-layout Recipes_page">
<div class="wrapper">
  <div class="sidebar">
    <!-- Sidebar  -->
    <nav id="sidebar">
      <div id="dismiss">
        <i class="fa fa-arrow-left"></i>
      </div>
      <ul class="list-unstyled components">
        <li><a th:href="@{/adminrest/perfil}">Perfil</a></li>
        <li><a th:href="@{/adminrest/menu}">Menu</a></li>
        <li><a th:href="@{/adminrest/cupones}">Cupones</a></li>
        <li><a th:href="@{/adminrest/pedidos}">Pedidos</a></li>
        <li><a th:href="@{/adminrest/calificaciones}">Calificaciones</a></li>
      </ul>
    </nav>
  </div>
  <div id="content">
    <!-- header -->
    <header>
      <div th:replace="fragments/adminRestaurante.html :: navbar"></div>
    </header>
    <!-- end header -->
    <!-- blog -->
    <div class="blog">
      <div class="container">
        <div class="row">
          <div class="col-10">
          </div>
          <div class="col-2">
            <div class="d-flex justify-content-end">
              <a th:href="@{/adminrest/perfil}" type="button" class="send" style="text-align: center;background: #d8b00f">Regresar</a>
            </div>
          </div>
        </div>
        <br>
        <div class="row">
          <div class="col-8">
            <h1>Historial de pedidos</h1>
          </div>
          <div class="col-4">
            <div class="d-flex justify-content-end">
              <a th:href="@{/adminrest/excelexportar}" type="button" class="btn btn-success">Exportar a Excel</a>
            </div>
          </div>
        </div>
        <br>
        <form class="form-group mb-3" method="post" th:action="@{/buscarReporte}">
          <div class="input-group-text">
            <input style="margin: 5px" class="form-control" placeholder="Ingrese el texto a buscar" name="name">
            <button class="btn btn-primary" style="margin: 5px" type="submit">Buscar</button>
            <a class="btn btn-danger" style="margin: 5px" th:href="@{/reporte}">Limpiar</a>
          </div>
        </form>
        <div class="row table-users">
          <!-- table -->
          <div class="col-md-12">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead >
                <tr>
                  <th scope="col">#Pedido</th>
                  <th scope="col">Fecha del pedido</th>
                  <th scope="col">Nombre del cliente</th>
                  <th scope="col">Monto del pedido</th>
                  <th scope="col">Nombre del plato</th>
                  <th scope="col">Metodo de pago</th>
                  <th scope="col">Distrito del pedido</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="pedido: ${listaPedidosPorFecha}">
                  <td th:text="${pedido.getnumeropedido()}"></td>
                  <td scope="row" th:text="${pedido.getfechahorapedido()}"><a href="repartidor_pedido_1.html"></a></td>
                  <td th:text="${pedido.getnombre()} + ' ' + ${pedido.getapellidos()}"></td>
                  <td th:text="${pedido.getmontototal()}"></td>
                  <td th:text="${pedido.getnombreplato()}"></td>
                  <td th:text="${pedido.getmetodo()}"></td>
                  <td th:text="${pedido.getdistrito()}"></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- end of table -->
          <div class="row">
            <nav aria-label="Page navigation example" class = "mx-auto">
              <ul class="pagination justify-content-center">

                <!--  BOTON ANTERIOR -->
                <li class="page-item disabled" th:if="${currentPage eq 1 }">
                  <span class="page-link">Anterior</span>
                </li>
                <li class="page-item" th:unless="${currentPage eq 1}">
                  <a class="page-link"
                     th:href="@{/adminrest/reporte(page=${currentPage - 1},page2=${currentPage2})}">Anterior</a>
                </li>

                <!-- BOTONES NUMEROS -->
                <li th:each="i : ${#numbers.sequence( 1, maxNumberOfPages )}"
                    th:class="${ i == currentPage ? 'page-item active .bg-secondary' : 'page-item' }">
                  <a class="page-link"  th:href="@{/adminrest/reporte(page=${i},page2=${currentPage2})}"
                     th:text="${i}"
                  ></a>
                </li>

                <!--  BOTON SIGUIENTE -->
                <li class="page-item disabled" th:if="${currentPage eq maxNumberOfPages }">
                  <span class="page-link">Anterior</span>
                </li>
                <li class="page-item" th:unless="${currentPage eq maxNumberOfPages}">
                  <a class="page-link" th:href="@{/adminrest/reporte(page=${currentPage + 1},page2=${currentPage2})}">Siguiente</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <br>
      <div class="container">
        <h1>Ingresos mensuales</h1>
        <div class="row table-users">
          <!-- table -->
          <div class="col-md-12">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead >
                <tr>
                  <th scope="col">Mes</th>
                  <th scope="col">Anio</th>
                  <th scope="col">Ganancia (S/.)</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="g: ${listaGanancias}">
                  <td th:text="${g.getmes()}"></td>
                  <td th:text="${g.getanio()}"></td>
                  <td th:text="${g.getganancia()}"></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="row">
            <nav aria-label="Page navigation example" class = "mx-auto">
              <ul class="pagination justify-content-center">

                <!--  BOTON ANTERIOR -->
                <li class="page-item disabled" th:if="${currentPage2 eq 1 }">
                  <span class="page-link">Anterior</span>
                </li>
                <li class="page-item" th:unless="${currentPage2 eq 1}">
                  <a class="page-link"
                     th:href="@{/adminrest/reporte(page=${currentPage},page2=${currentPage2 - 1})}">Anterior</a>
                </li>

                <!-- BOTONES NUMEROS -->
                <li th:each="i2 : ${#numbers.sequence( 1, maxNumberOfPages2 )}"
                    th:class="${ i2 == currentPage2 ? 'page-item active .bg-secondary' : 'page-item' }">
                  <a class="page-link"  th:href="@{/adminrest/reporte(page=${currentPage},page2=${i2})}"
                     th:text="${i2}"
                  ></a>
                </li>

                <!--  BOTON SIGUIENTE -->
                <li class="page-item disabled" th:if="${currentPage2 eq maxNumberOfPages2 }">
                  <span class="page-link">Anterior</span>
                </li>
                <li class="page-item" th:unless="${currentPage2 eq maxNumberOfPages2}">
                  <a class="page-link" th:href="@{/adminrest/reporte(page=${currentPage},page2=${currentPage2 + 1})}">Siguiente</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <br>
      <div class="container">
        <h1>Top 5 platos mas vendidos</h1>
        <div class="row table-users">
          <!-- table -->
          <div class="col-md-12">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead >
                <tr>
                  <th scope="col">Nombre del plato</th>
                  <th scope="col">Cantidad vendida</th>
                  <th scope="col">Ganancia por plato(S/.)</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p: ${platosTop5}">
                  <td th:text="${p.getnombreplato()}"></td>
                  <td th:text="${p.getcantidad()}"></td>
                  <td th:text="${p.getganancia()}"></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <br>
      <div class="container">
        <h1>Top 5 platos menos vendidos</h1>
        <div class="row table-users">
          <!-- table -->
          <div class="col-md-12">
            <div class="table-responsive">
              <table class="table table-striped">
                <thead >
                <tr>
                  <th scope="col">Nombre del plato</th>
                  <th scope="col">Cantidad vendida</th>
                  <th scope="col">Ganancia por plato(S/.)</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="p: ${platosNoTop5}">
                  <td th:text="${p.getnombreplato()}"></td>
                  <td th:text="${p.getcantidad()}"></td>
                  <td th:text="${p.getganancia()}"></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- end blog -->

  <!-- footer -->
  <fooetr>
    <div class="footer">
      <div class="container-fluid">
        <div class="copyright">
          <div class="container">
            <p>Â© 2050 All Rights Reserved</p>
          </div>
        </div>
      </div>

    </div>
  </fooetr>
  <!-- end footer -->

</div>
</div>
<div class="overlay"></div>
<!-- Javascript files-->
<script src="/js/jquery.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/custom.js"></script>
<script src="/js/jquery.mCustomScrollbar.concat.min.js"></script>

<script src="/js/jquery-3.0.0.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $("#sidebar").mCustomScrollbar({
      theme: "minimal"
    });

    $('#dismiss, .overlay').on('click', function() {
      $('#sidebar').removeClass('active');
      $('.overlay').removeClass('active');
    });

    $('#sidebarCollapse').on('click', function() {
      $('#sidebar').addClass('active');
      $('.overlay').addClass('active');
      $('.collapse.in').toggleClass('in');
      $('a[aria-expanded=true]').attr('aria-expanded', 'false');
    });
  });
</script>

<style>
  #owl-demo .item{
    margin: 3px;
  }
  #owl-demo .item img{
    display: block;
    width: 100%;
    height: auto;
  }
</style>


<script>
  $(document).ready(function() {
    var owl = $('.owl-carousel');
    owl.owlCarousel({
      margin: 10,
      nav: true,
      loop: true,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 2
        },
        1000: {
          items: 5
        }
      }
    })
  })
</script>

</body>

</html>