<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js">
	<!-- basic -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- mobile metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1">
	<!-- site metas -->
	<title>Spicyo</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<meta name="author" content="">
	<!-- bootstrap css -->
	<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
	<!-- owl css -->
	<link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}">
	<!-- style css -->
	<link rel="stylesheet" th:href="@{/css/style.css}">
	<!-- responsive-->
	<link rel="stylesheet" th:href="@{/css/responsive.css}">
	<!-- awesome fontfamily -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<style>
		body {
			color: #000;
			overflow-x: hidden;
			height: 100%;
			background-color: #455A64;
			background-repeat: no-repeat
		}

		.card {
			z-index: 0;
			background-color: white;
			padding-bottom: 20px;
			margin-top: 90px;
			margin-bottom: 90px;
			border-radius: 10px
		}

		.top {
			padding-top: 40px;
			padding-left: 13% !important;
			padding-right: 13% !important
		}

		#progressbar {
			margin-bottom: 30px;
			overflow: hidden;
			color: #455A64;
			padding-left: 0px;
			margin-top: 30px
		}

		#progressbar li {
			list-style-type: none;
			font-size: 13px;
			width: 20%;
			float: left;
			position: relative;
			font-weight: 400
		}

		#progressbar .step0:before {
			font-family: FontAwesome;
			content: "\f10c";
			color: #fff
		}

		#progressbar li:before {
			width: 40px;
			height: 40px;
			line-height: 45px;
			display: block;
			font-size: 20px;
			background: #C5CAE9;
			border-radius: 50%;
			margin: auto;
			padding: 0px
		}

		#progressbar li:after {
			content: '';
			width: 100%;
			height: 12px;
			background: #C5CAE9;
			position: absolute;
			left: 0;
			top: 16px;
			z-index: -1
		}

		#progressbar li:last-child:after {
			border-top-right-radius: 10px;
			border-bottom-right-radius: 10px;
			position: absolute;
			left: -50%
		}

		#progressbar li:nth-child(2):after,
		#progressbar li:nth-child(3):after,
		#progressbar li:nth-child(4):after {
			left: -50%
		}

		#progressbar li:first-child:after {
			border-top-left-radius: 10px;
			border-bottom-left-radius: 10px;
			position: absolute;
			left: 50%
		}

		#progressbar li:last-child:after {
			border-top-right-radius: 10px;
			border-bottom-right-radius: 10px
		}

		#progressbar li:first-child:after {
			border-top-left-radius: 10px;
			border-bottom-left-radius: 10px
		}

		#progressbar li.active:before,
		#progressbar li.active:after {
			background: #ffb31a;
		}

		#progressbar li.active:before {
			font-family: FontAwesome;
			content: "\f00c"
		}

		.icon {
			width: 60px;
			height: 60px;
			margin-right: 15px
		}

		.icon-content {
			padding-bottom: 20px
		}

		@media screen and (max-width: 992px) {
			.icon-content {
				width: 50%
			}
		}

	</style>
</head>

<!-- body -->

<body class="main-layout">
<!-- loader  -->
<div class="loader_bg">
	<div class="loader"><img th:src="@{/images/loading.gif}" alt="" /></div>
</div>

<div class="wrapper">
	<!-- end loader -->

	<!-- Sidebar  -->
	<div th:replace="fragments/cliente.html:: slider" class="sidebar">
	</div>


</div>

<div id="content">
	<!-- header -->
	<header th:replace="fragments/cliente.html :: bar"></header>



	<!-- blog -->
	<!-- end blog -->
	<!-- footer -->
	<fooetr>
		<div class="footer">
			<div class="container-fluid">
				<div class="row" th:if="${ultimopedido}"> <!-- hay algun pedido -->
					<input type="hidden" name="estadorestaurante" id="estadorestaurante" th:value="${pedido.estadorestaurante}">
					<input type="hidden" name="estadorepartidor" id="estadorepartidor" th:value="${pedido.estadorepartidor}">
					<h2 style="padding-left: 223px;">Tu pedido más reciente</h2>
					<div class="container">
						<div class="card" style="margin-top: 50px; margin-bottom: 50px;">
							<div class="row d-flex justify-content-between px-3 top">
								<div class="d-flex">
									<h5>Estado de tu pedido</h5>
								</div>
								<div class="d-flex flex-column text-sm-right">
									<p class="mb-0">Fecha de pedido <span class="font-weight-bold" style="color: black;" th:text="${pedido.fechahorapedido.toString().replace('T',' ')}">01/12/19</span></p>
									<!--p>USPS <span class="font-weight-bold">234094567242423422898</span></p-->
								</div>
							</div> <!-- Add class 'active' to progress -->
							<div class="row d-flex justify-content-center">
								<div class="col-12">
									<ul id="progressbar" class="text-center">
										<li class="active step0" id="primero"></li>
										<li class="step0" id="segundo"></li>
										<li class="step0" id="tercero"></li>
										<li class="step0" id="cuarto"></li>
										<li class="step0" id="quinto"></li>
									</ul>
								</div>
							</div>
							<div class="row justify-content-between top" style="height: 124px;">
								<div class="row d-flex icon-content" style="width: 74px;">
									<div class="d-flex flex-column">
										<p class="font-weight-bold" style="width: 80px;">Pedido<br>realizado</p>
									</div>
								</div>
								<div class="row d-flex icon-content" style="width: 74px;">
									<div class="d-flex flex-column">
										<p class="font-weight-bold" style="width: 80px;">Pedido<br>aceptado</p>
									</div>
								</div>
								<div class="row d-flex icon-content" style="width: 74px;">
									<div class="d-flex flex-column">
										<p class="font-weight-bold" style="width: 82px;">Pedido<br>Preparado</p>
									</div>
								</div>
								<div class="row d-flex icon-content" style="width: 74px;">
									<div class="d-flex flex-column">
										<p class="font-weight-bold" style="width: 85px;">Pedido<br>En Camino</p>
									</div>
								</div>
								<div class="row d-flex icon-content" style="width: 74px;">
									<div class="d-flex flex-column">
										<p class="font-weight-bold" style="width: 82px;">Pedido<br>Entregado</p>
									</div>
								</div>
							</div>
						</div>
					</div>
					<h2 style="padding-left: 223px;">Detalles de tu pedido</h2>
					<div class="col-xl-8 col-lg-8 col-md-8 col-sm-12">
						</br>
						</br>
						<div class="card" style="margin-top: 0px; margin-bottom: 50px;margin-left: 185px; width: 80%; border-radius: 5px;">
							<table class="table table-hover" style="width: 95%; margin:15px;">
								<thead>
									<tr>
										<th scope="col">Cantidad</th>
										<th scope="col">Nombre del Plato</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="plato : ${lista}">
										<td th:text="${plato.getCantidadplatos()}"></td>
										<td th:text="${plato.getPlato().getNombre()}">Mark</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<div  class="col-xl-4 col-lg-4 col-md-4 col-sm-12" >
						</br>
						</br>
						<!-- detalles monto total -->
						<div style="padding-right: 150px;">
							<ul class="list-group mb-3">
								<li class="list-group-item d-flex justify-content-between lh-sm">
									<div>
										<h6 class="my-0">Costo total de productos</h6>
									</div>
									<span class="text-muted" id="montoplatos">asdasdad</span>
								</li>
								<li class="list-group-item d-flex justify-content-between lh-sm">
									<div>
										<h6 class="my-0">Costo de envío</h6>
									</div>
									<span class="text-muted" th:if="${pedido.getRestaurantepedido().getDistrito() == pedido.getDireccionentrega().getDistrito()}" th:text="|S/4.00|"></span>
									<span class="text-muted" th:if="${pedido.getRestaurantepedido().getDistrito() != pedido.getDireccionentrega().getDistrito()}" th:text="|S/6.00|"></span>
								</li>
								<li class="list-group-item d-flex justify-content-between lh-sm">
									<div>
										<h6 class="my-0">Tarifa de servicio</h6>
									</div>
									<input type="hidden" th:value = "${pedido.getRestaurantepedido().getDistrito().getIddistritos()}" id="distritorestaurante">
									<input type="hidden" th:value = "${pedido.getDireccionentrega().getDistrito().getIddistritos()}" id="distritopedidoentrega">
									<input type="hidden" id="montototalpedido" th:value="${pedido.montototal}">
									<span class="text-muted" th:if="${pedido.getRestaurantepedido().getDistrito() == pedido.getDireccionentrega().getDistrito()}" th:text="|S/1.00|"></span>
									<span class="text-muted" th:if="${pedido.getRestaurantepedido().getDistrito() != pedido.getDireccionentrega().getDistrito()}" th:text="|S/2.00|"></span>
								</li>
								<li class="list-group-item d-flex justify-content-between">
									<span>Total</span>
									<strong th:text="|S/${pedido.montototal}|" >asdasdas</strong>
								</li>
							</ul>
						</div>
						<!-- detalles monto total -->
					</div>
					<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12" th:if="${calificar}">
						<div class="row" style="padding-left:240px;">
							<a th:href="@{'/cliente/calificarpedido'}" style="width: 275px;"><button class="send">Calificar pedido</button></a>
						</div>
						</br>
					</div>
					<div class="col-xl-6 col-lg-6 col-md-6 col-sm-12" th:if="${cancelar}">
						<div class="row" style="padding-left:240px;">
							<a th:href="@{'/cliente/cancelarpedido'}" style="width: 275px;"><button onclick="return confirm('¿Está seguro de cancelar este pedido?')" class="send">Cancelar pedido</button></a>
						</div>
						</br>
					</div>
					<div>
						<h3 style="padding-left: 223px; padding-right: 125px;"><strong class="white">En caso hayas escogido tu método de pago como tarjeta online, se te cobrará el monto total cuando se marque como entregado el pedido</strong></h3>
					</div>
				</div> <!--termino hay pedido -->
				<div class = "row" th:unless="${ultimopedido}">
					<div class="col-md-6 offset-md-3">
						<div class="Client_box">
							<h3>Aún no haz realizado ningún pedido :(</h3>
							<p>Te invitamos a visitar nuestros restaurantes y agregar productos a tu canasta.</p>
						</div>
					</div>
				</div>

			</div>
			<div class="footer">

				<div class="copyright" style="margin-top: -29px">
					<div class="container">
						<p>© 2021 Todos los derechos reservados</p>
					</div>
				</div>
			</div>
	</fooetr>
	<!-- end footer -->

</div>
<div class="overlay"></div>
<!-- Javascript files-->

<script th:src="@{/js/pruebacarrito.js}" ></script>

<script th:src="@{/js/jquery.min.js}" ></script>
<script th:src="@{/js/popper.min.js}" ></script>
<script th:src="@{/js/bootstrap.bundle.min.js}" ></script>
<script th:src="@{/js/custom.js}" ></script>
<script th:src="@{/js/jquery.mCustomScrollbar.concat.min.js}" ></script>

<script th:src="@{/js/jquery-3.0.0.min.js}" ></script>
<script type="text/javascript">
	$(document).ready(function() {
		$("#sidebar").mCustomScrollbar({
			theme: "minimal"
		});

		$('#dismiss, .overlay').on('click', function() {
			$('#sidebar').removeClass('active');
			$('.overlay').removeClass('active');
		});

		$('#sidebarCollapse').on('click', function() {
			$('#sidebar').addClass('active');
			$('.overlay').addClass('active');
			$('.collapse.in').toggleClass('in');
			$('a[aria-expanded=true]').attr('aria-expanded', 'false');
		});
	});

</script>
<script>
	$(document).ready(function() {
		var estadorestaurante = document.getElementById("estadorestaurante").value;
		var estadorepartidor = document.getElementById("estadorepartidor").value;
		console.log(estadorestaurante);
		console.log(estadorepartidor);
		if(estadorestaurante == "aceptado"){
			$('#segundo').addClass('active');
		}
		if(estadorestaurante == "preparado"){
			$('#segundo').addClass('active');
			$('#tercero').addClass('active');
		}
		if(estadorepartidor == "recogido"){
			$('#segundo').addClass('active');
			$('#tercero').addClass('active');
			$('#cuarto').addClass('active');
		}
		if(estadorepartidor == "entregado"){
			$('#segundo').addClass('active');
			$('#tercero').addClass('active');
			$('#cuarto').addClass('active');
			$('#quinto').addClass('active');
		}

		var montototalpedido = document.getElementById("montototalpedido").value;
		var distritorestaurante = document.getElementById("distritorestaurante").value;
		var distritopedidoentrega = document.getElementById("distritopedidoentrega").value;

		if(distritorestaurante == distritopedidoentrega){
			let montocostoplatos = montototalpedido - 5;
			$('#montoplatos').text("S/" + montocostoplatos);
			console.log(montocostoplatos);
		}else{
			let montocostoplatos = montototalpedido - 8;
			$('#montoplatos').innerHTML(montocostoplatos);
			console.log(montocostoplatos);
		}

	});
</script>
<style>
	#owl-demo .item{
		margin: 3px;
	}
	#owl-demo .item img{
		display: block;
		width: 100%;
		height: auto;
	}
</style>


</body>

</html>